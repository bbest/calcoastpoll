<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Analyze Poll Data • calcoastpoll</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Analyze Poll Data">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">calcoastpoll</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/analyze.html">Analyze Poll Data</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/bbest/calcoastpoll">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><script src="analyze_files/htmlwidgets-1.3/htmlwidgets.js"></script><script src="analyze_files/jquery-1.12.4/jquery.min.js"></script><link href="analyze_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="analyze_files/datatables-binding-0.5/datatables.js"></script><link href="analyze_files/dt-core-1.10.16/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="analyze_files/dt-core-1.10.16/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="analyze_files/dt-core-1.10.16/js/jquery.dataTables.min.js"></script><link href="analyze_files/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet">
<script src="analyze_files/crosstalk-1.0.0/js/crosstalk.min.js"></script><script src="analyze_files/plotly-binding-4.8.0/plotly.js"></script><script src="analyze_files/typedarray-0.1/typedarray.min.js"></script><link href="analyze_files/plotly-htmlwidgets-css-1.39.2/plotly-htmlwidgets.css" rel="stylesheet">
<script src="analyze_files/plotly-main-1.39.2/plotly-latest.min.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Analyze Poll Data</h1>
                        <h4 class="author">Ben Best</h4>
            
            <h4 class="date">2019-03-04</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/bbest/calcoastpoll/blob/master/vignettes/analyze.Rmd"><code>vignettes/analyze.Rmd</code></a></small>
      <div class="hidden name"><code>analyze.Rmd</code></div>

    </div>

    
    
<div id="data-read" class="section level2">
<h2 class="hasAnchor">
<a href="#data-read" class="anchor"></a>Data: Read</h2>
<p>We’ll need to read the data and transform it from a wide table (with many columns) to a long one (with only a few columns) so that each row contains a unique value, ie an answer, and then we can easily query for any question or combination. With this data structure we can create and use generic plotting functions that accept any question or combination of questions to generate visualizations.</p>
<p>For the long data format from the polling data, we want a table with these columns:</p>
<table class="table">
<thead><tr class="header">
<th>heading</th>
<th>question</th>
<th>answer</th>
<th>survey_id</th>
<th>value_num</th>
<th>value_chr</th>
</tr></thead>
<tbody><tr class="odd">
<td>…</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr></tbody>
</table>
<p>To arrive at this more generic data structure for querying, you can use the function <code><a href="../reference/tidy_poll.html">tidy_poll()</a></code>.</p>
<p>For more background on the how to read and manipulate data, you can check out the following cheatsheets found in RStudio’s Help menu or at <a href="https://www.rstudio.com/resources/cheatsheets/">Cheatsheets - RStudio</a>:</p>
<ul>
<li><a href="https://github.com/rstudio/cheatsheets/raw/master/data-import.pdf">Data Import</a></li>
<li><a href="https://github.com/rstudio/cheatsheets/raw/master/data-transformation.pdf">Data Transformation with dplyr</a></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># load libaries</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(calcoastpoll) <span class="co"># devtools::load_all() # devtools::install()</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(tidyverse)    <span class="co"># see tidyverse.org for packages loaded </span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(plotly)       <span class="co"># use ggplotly() to make plot interactive</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(DT)           <span class="co"># for rendering interactive datatable()</span>

<span class="co"># paths and parameters of poll data</span>
data_xlsx           &lt;-<span class="st"> "CoastalOpinionPoll_thru2017.xlsx"</span>
headers_xlsx        &lt;-<span class="st"> "CoastalOpinionPoll_thru2017_headers.xlsx"</span>
row_end             &lt;-<span class="st"> </span><span class="dv">12891</span>
cols_chr            &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">2</span>,<span class="dv">4</span><span class="op">:</span><span class="dv">7</span>,<span class="dv">10</span><span class="op">:</span><span class="dv">13</span>,<span class="dv">46</span>,<span class="dv">167</span>,<span class="dv">256</span>,<span class="dv">263</span>,<span class="dv">434</span>,<span class="dv">437</span>,<span class="dv">438</span>,<span class="dv">447</span>,<span class="dv">455</span>,<span class="dv">460</span>,<span class="dv">487</span>)
dir_diagnostic_csvs &lt;-<span class="st"> "."</span>

<span class="co"># tidy up data and save as csv for reading next time</span>
<span class="cf">if</span> (<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/files">file.exists</a></span>(<span class="st">"data.csv"</span>)){
  d &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">"data.csv"</span>, <span class="dt">col_types =</span> <span class="kw">cols</span>(<span class="dt">value_num =</span> <span class="kw">col_double</span>()))
} <span class="cf">else</span> {
  d &lt;-<span class="st"> </span><span class="kw"><a href="../reference/tidy_poll.html">tidy_poll</a></span>(data_xlsx, headers_xlsx, row_end, cols_chr, dir_diagnostic_csvs)  
  <span class="kw">write_csv</span>(d, <span class="st">"data.csv"</span>)
}</code></pre></div>
<p>Here are direct downloads to files:</p>
<ul>
<li>input data and headers:
<ul>
<li><a href="https://github.com/bbest/calcoastpoll/blob/master/vignettes/CoastalOpinionPoll_thru2017.xlsx">CoastalOpinionPoll_thru2017.xlsx</a></li>
<li><a href="https://github.com/bbest/calcoastpoll/blob/master/vignettes/CoastalOpinionPoll_thru2017_headers.xlsx">CoastalOpinionPoll_thru2017_headers.xlsx</a></li>
</ul>
</li>
<li>output data:
<ul>
<li><a href="https://github.com/bbest/calcoastpoll/blob/master/vignettes/data.csv">data.csv</a></li>
</ul>
</li>
<li>output diagnostics:
<ul>
<li><a href="https://github.com/bbest/calcoastpoll/blob/master/vignettes/questions.csv">questions.csv</a></li>
<li><a href="https://github.com/bbest/calcoastpoll/blob/master/vignettes/answers.csv">answers.csv</a></li>
<li><a href="https://github.com/bbest/calcoastpoll/blob/master/vignettes/todo_data-not-numeric.csv">todo_data-not-numeric.csv</a></li>
</ul>
</li>
</ul>
</div>
<div id="data-questions" class="section level2">
<h2 class="hasAnchor">
<a href="#data-questions" class="anchor"></a>Data: Questions</h2>
<p>Now we can easily look at the questions and how many answers are associated and display with some interactivity using the <code><a href="https://www.rdocumentation.org/packages/DT/topics/datatable">DT::datatable()</a></code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">qs &lt;-<span class="st"> </span>d <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/plotly/topics/reexports">group_by</a></span>(heading, question) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/plotly/topics/reexports">summarise</a></span>(<span class="dt">n_answers =</span> <span class="kw">n</span>())
<span class="kw"><a href="https://www.rdocumentation.org/packages/DT/topics/datatable">datatable</a></span>(qs)</code></pre></div>
<div id="htmlwidget-33e5d6892ac62c1198b1" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-33e5d6892ac62c1198b1">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107"],["Beach","Beach","Channel Islands","Channel Islands","Climate Change","Coastal (General)","Coastal (General)","Coastal (General)","Coastal Science","Coastal Science","Demographics","Demographics","Demographics","Demographics","Demographics","Demographics","Demographics","Demographics","Demographics","Demographics","Demographics","Demographics","Demographics","Endangered Species","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Management Scoring","Metadata","Natural Disaster-Fires","Natural Disaster-Hurricanes","Natural Disaster-Nukes","Natural Disaster-Nukes","Natural Disaster-Oil Spill","Natural Disaster-Oil Spill","Natural Disaster-Oil Spill","Natural Disaster-Oil Spill","Natural Disaster-Oil Spill","Natural Disaster-Oil Spill","Protected Areas","Seafood/Fisheries","Seafood/Fisheries","Seafood/Fisheries","Seafood/Fisheries","Seafood/Fisheries","Seafood/Fisheries","Seafood/Fisheries","Seafood/Fisheries","Seafood/Fisheries","Seafood/Fisheries","Seafood/Fisheries","Seafood/Fisheries","Seafood/Fisheries","Seafood/Fisheries","Seafood/Fisheries","Seafood/Fisheries","Seafood/Fisheries","Word Associations"],["Recreational Activities","Visit SoCal Beaches","Channel Islands visited","Last visited Channel Islands?-Original Categories","Climate change problem?","CA ocean health better?","Good mgmnt of Coast?","Rank threats to coastal","Describe ecology","Motivation of scientists","Education","Env Issues","Gender","Household Income","Language","Last natural area visited","Occupation","Source of news","Valuation of nature","Voter","Year Born","Years at Zip","Zip Code","Endangered Sp laws","1969 SB Spill","1997 Gillnet ban","2012 State Park Closures","AB 32 cap-and-trade","Abalone Closure","Ballona Rest'n","Beach Nests","Bolsa Chica Rest'n","CA Coastal Monument","CA Groundwater","CI Feral Animals","CI Nat'l Marine Sanct.","CI Nat'l Park","Clean Water Act point source","Coastal Commission","Coastal Trail","Commericial Fish Laws","Dams &amp; Levees","DDT Ban","Desalination Plant Hurdles","Drug Interdiction","Ease of permits/regs","Eliminate Ship Building","Homeless","Improve water quality","Kelestra Songus","Low Frequency Sonar","Malibu Lagoon Rest'n","Managed Retreat","Mariculture hurdles","Matilija Dam Removal","MeBr Ban","MPAs","No LNG","NonCoastal Dep","Offshore Drilling","Plastic bag bans","Port fees/regulation","Power Plants in Coastal","Public Coastal Access","Rec Fish Laws","San Dieguito Rest'n","San Nic Sea Otters","San Onofre Rest'n","Santa Rosa Hunting","Shrinking Working Ports","SMMNRA","Steelhead Recovery","Stormwater","Tidal &amp; Offshore Power","Urban Parks","Whale Strikes","Wildlife Crossings","Metadata","Malibu Fires","New Orleans rebuilt?","Attitude towards nukes after SONGS Problem","Attitude towards nukes drilling after Fukushima","Attitude towards offshore drilling after BP","Attitude towards offshore drilling after Refugio","Blame for oil spill in the Gulf","Joint Resonse to BP Oil Spill","Joint Resonse to Refugio Oil Spill","Offshore oil drilling?","Visit natural areas","Alaska seafood safe?","CA fisheries health better?","California seafood safe?","China seafood safe?","Commerical Fishing Regulation Level","Fish Threats","Fishing Regulation Types","Gulf of Mexico seafood safe?","Heard of MPAs?","Heard of the following in relation to seafood","Japan seafood safe?","Norway seafood safe?","Purchasing seafood","Santa Barbara seafood safe?","Seafood eating","Seafood Oz.","Thailand seafood safe?","When you hear California…"],[239833,32122,65093,57795,45664,45452,45620,53206,56156,42992,47704,19017,21528,44580,18395,23691,18032,112968,89555,27175,20035,19079,19454,69832,6300,6297,6419,5792,6338,6391,6486,4905,4949,2277,6465,6556,6582,4953,6432,5060,6463,4975,6546,4846,6442,5814,4907,2306,5034,5721,4910,6413,6422,6288,4906,6437,6483,4926,6380,6601,6622,6330,5038,6455,6459,4924,6362,4938,6477,4897,6535,4973,4947,6377,6527,6456,2292,86338,33703,59295,32184,35337,42616,15734,56190,59694,22398,67308,85186,34749,43967,34621,34533,41691,38959,38139,44734,27802,81702,37697,22954,79386,16356,79996,17321,22921,2966]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>heading<\/th>\n      <th>question<\/th>\n      <th>n_answers<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":3},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="bar-ca-ocean-health-better-by-year" class="section level2">
<h2 class="hasAnchor">
<a href="#bar-ca-ocean-health-better-by-year" class="anchor"></a>Bar: CA ocean health better?, by year</h2>
<p>Let’s use another custom function <code>plot_bar_year()</code> to look at how answers to a question vary over the years.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p &lt;-<span class="st"> </span><span class="kw"><a href="../reference/plot_pctbar_qyn_year.html">plot_pctbar_qyn_year</a></span>(d, <span class="st">"CA ocean health better?"</span>)
p</code></pre></div>
<p><img src="analyze_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
</div>
<div id="bar-ca-ocean-health-better-by-year-interactive" class="section level2">
<h2 class="hasAnchor">
<a href="#bar-ca-ocean-health-better-by-year-interactive" class="anchor"></a>Bar: CA ocean health better?, by year, interactive</h2>
<p>To make a graph interactive, we simply feed the plot object to the <code><a href="https://www.rdocumentation.org/packages/plotly/topics/ggplotly">plotly::ggplotly()</a></code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/plotly/topics/ggplotly">ggplotly</a></span>(p)</code></pre></div>
<div id="htmlwidget-8f452fafcce3b21e1e5c" style="width:700px;height:432.632880098888px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-8f452fafcce3b21e1e5c">{"x":{"data":[{"orientation":"v","width":[328.5,328.5,328.5,328.5,328.5,328.5,328.5,328.5,328.5,328.5],"base":[0.438748913987837,0.398821218074656,0.387448840381992,0.48130081300813,0.425174825174825,0.51890756302521,0.471698113207547,0.557496360989811,0.538208709942481,0.496199032480995],"x":[13879,14245,14610,14975,15340,15706,16071,16436,16801,17167],"y":[0.561251086012163,0.601178781925344,0.612551159618008,0.51869918699187,0.574825174825175,0.48109243697479,0.528301886792453,0.442503639010189,0.461791290057519,0.503800967519005],"text":["year: 2008-01-01<br />sum: 0.5612511<br />answer: no","year: 2009-01-01<br />sum: 0.6011788<br />answer: no","year: 2010-01-01<br />sum: 0.6125512<br />answer: no","year: 2011-01-01<br />sum: 0.5186992<br />answer: no","year: 2012-01-01<br />sum: 0.5748252<br />answer: no","year: 2013-01-01<br />sum: 0.4810924<br />answer: no","year: 2014-01-01<br />sum: 0.5283019<br />answer: no","year: 2015-01-01<br />sum: 0.4425036<br />answer: no","year: 2016-01-01<br />sum: 0.4617913<br />answer: no","year: 2017-01-01<br />sum: 0.5038010<br />answer: no"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(215,25,28,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"no","legendgroup":"no","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[328.5,328.5,328.5,328.5,328.5,328.5,328.5,328.5,328.5,328.5],"base":[0.11120764552563,0.110019646365422,0.124829467939973,0.133333333333333,0.126573426573427,0.234243697478992,0.188679245283019,0.2372634643377,0.202136400986031,0.161022805805114],"x":[13879,14245,14610,14975,15340,15706,16071,16436,16801,17167],"y":[0.327541268462207,0.288801571709234,0.262619372442019,0.347967479674797,0.298601398601399,0.284663865546219,0.283018867924528,0.320232896652111,0.33607230895645,0.335176226675881],"text":["year: 2008-01-01<br />sum: 0.3275413<br />answer: unsure","year: 2009-01-01<br />sum: 0.2888016<br />answer: unsure","year: 2010-01-01<br />sum: 0.2626194<br />answer: unsure","year: 2011-01-01<br />sum: 0.3479675<br />answer: unsure","year: 2012-01-01<br />sum: 0.2986014<br />answer: unsure","year: 2013-01-01<br />sum: 0.2846639<br />answer: unsure","year: 2014-01-01<br />sum: 0.2830189<br />answer: unsure","year: 2015-01-01<br />sum: 0.3202329<br />answer: unsure","year: 2016-01-01<br />sum: 0.3360723<br />answer: unsure","year: 2017-01-01<br />sum: 0.3351762<br />answer: unsure"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(127,127,127,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"unsure","legendgroup":"unsure","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[328.5,328.5,328.5,328.5,328.5,328.5,328.5,328.5,328.5,328.5],"base":[0,0,0,0,0,0,0,0,0,0],"x":[13879,14245,14610,14975,15340,15706,16071,16436,16801,17167],"y":[0.11120764552563,0.110019646365422,0.124829467939973,0.133333333333333,0.126573426573427,0.234243697478992,0.188679245283019,0.2372634643377,0.202136400986031,0.161022805805114],"text":["year: 2008-01-01<br />sum: 0.1112076<br />answer: yes","year: 2009-01-01<br />sum: 0.1100196<br />answer: yes","year: 2010-01-01<br />sum: 0.1248295<br />answer: yes","year: 2011-01-01<br />sum: 0.1333333<br />answer: yes","year: 2012-01-01<br />sum: 0.1265734<br />answer: yes","year: 2013-01-01<br />sum: 0.2342437<br />answer: yes","year: 2014-01-01<br />sum: 0.1886792<br />answer: yes","year: 2015-01-01<br />sum: 0.2372635<br />answer: yes","year: 2016-01-01<br />sum: 0.2021364<br />answer: yes","year: 2017-01-01<br />sum: 0.1610228<br />answer: yes"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(26,150,65,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"yes","legendgroup":"yes","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":27.82100456621,"r":7.30593607305936,"b":41.7753424657534,"l":48.9497716894977},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[13533.925,17512.075],"tickmode":"array","ticktext":["2008","2010","2012","2014","2016"],"tickvals":[13879,14610,15340,16071,16801],"categoryorder":"array","categoryarray":["2008","2010","2012","2014","2016"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":"year","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.05,1.05],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":"%","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"y":0.903902812148481},"annotations":[{"text":"answer","x":1.02,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"left","yanchor":"bottom","legendTitle":true}],"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"source":"A","attrs":{"273b1aabea99":{"x":{},"y":{},"fill":{},"type":"bar"}},"cur_data":"273b1aabea99","visdat":{"273b1aabea99":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script>
</div>
<div id="bar-climate-change-problem-by-education" class="section level2">
<h2 class="hasAnchor">
<a href="#bar-climate-change-problem-by-education" class="anchor"></a>Bar: Climate change problem?, by Education</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/plot_pctbar_qyn_qc.html">plot_pctbar_qyn_qc</a></span>(d, <span class="st">"Climate change problem?"</span>, <span class="st">"Education"</span>)</code></pre></div>
<p><img src="analyze_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
</div>
<div id="bar-climate-change-problem-by-env-issues" class="section level2">
<h2 class="hasAnchor">
<a href="#bar-climate-change-problem-by-env-issues" class="anchor"></a>Bar: Climate change problem?, by Env Issues</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/plot_pctbar_qyn_qc.html">plot_pctbar_qyn_qc</a></span>(d, <span class="st">"Climate change problem?"</span>, <span class="st">"Env Issues"</span>)</code></pre></div>
<p><img src="analyze_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
</div>
<div id="treemap-recreational-activities" class="section level2">
<h2 class="hasAnchor">
<a href="#treemap-recreational-activities" class="anchor"></a>Treemap: Recreational Activities</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/plot_treemap_qc.html">plot_treemap_qc</a></span>(d, <span class="st">"Recreational Activities"</span>)</code></pre></div>
<p><img src="analyze_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
</div>
<div id="treemap-recreational-activities-animated" class="section level2">
<h2 class="hasAnchor">
<a href="#treemap-recreational-activities-animated" class="anchor"></a>Treemap: Recreational Activities, animated</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(gganimate)

q   &lt;-<span class="st"> "Recreational Activities"</span>
gif &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste</a></span>(q, <span class="st">"animated_treemap.gif"</span>)

<span class="co"># animate to gif</span>
<span class="cf">if</span> (<span class="op">!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/files">file.exists</a></span>(gif)){
  <span class="kw"><a href="../reference/animate_treemap_qc_year.html">animate_treemap_qc_year</a></span>(d, q, gif)
}</code></pre></div>
<p>Now include the gif in the document with the following markdown:</p>
<p><code>![](`r gif`)</code></p>
<div class="figure">
<img src="Recreational%20Activities%20animated_treemap.gif">
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#data-read">Data: Read</a></li>
      <li><a href="#data-questions">Data: Questions</a></li>
      <li><a href="#bar-ca-ocean-health-better-by-year">Bar: CA ocean health better?, by year</a></li>
      <li><a href="#bar-ca-ocean-health-better-by-year-interactive">Bar: CA ocean health better?, by year, interactive</a></li>
      <li><a href="#bar-climate-change-problem-by-education">Bar: Climate change problem?, by Education</a></li>
      <li><a href="#bar-climate-change-problem-by-env-issues">Bar: Climate change problem?, by Env Issues</a></li>
      <li><a href="#treemap-recreational-activities">Treemap: Recreational Activities</a></li>
      <li><a href="#treemap-recreational-activities-animated">Treemap: Recreational Activities, animated</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Ben Best.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
